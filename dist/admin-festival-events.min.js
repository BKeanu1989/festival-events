"use strict";var _createClass=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var prices=void 0,variationsWrapper=void 0,variationsTab=void 0,triggerPopulateButton=void 0;prices=Array.from(document.querySelectorAll('[name^="variable_regular_price"]')),variationsTab=document.querySelector(".variations_tab"),triggerPopulateButton=document.querySelector("#trigger_populate_prices"),variationsWrapper=document.querySelector("#variable_product_options_inner > div.woocommerce_variations"),triggerPopulateButton&&(triggerPopulateButton.addEventListener("click",function(){console.log("populate prices!!!");var e=new PriceSetter;e.populatePrices(),console.log(e.variations)}),console.log(variationsWrapper));var PriceSetter=function(){function e(){_classCallCheck(this,e),this.lockerPrices=this.getDomLockerPrices()}return _createClass(e,[{key:"populatePrices",value:function(e,t){jQuery.ajax({url:ajaxurl,data:{action:"fe_set_prices",data:{lockerPrices:this.lockerPrices,productID:localizedVars.postID}},success:function(e){console.log(e)},error:function(e){console.log(e)}})}},{key:"getDomLockerPrices",value:function(){var r={"Full Festival":[],Daily:[]};return Array.from(document.querySelectorAll('[type="number"][name^="_schlie√üf"]')).forEach(function(e){var t={},a="Full Festival"==e.dataset.period?"Full Festival":"Daily";t.lockerType=e.dataset.lockertype,t.price=e.value,t.period=a,r[a].push(t)}),r}}]),e}(),setAttributeButton=void 0;setAttributeButton&&setAttributeButton.addEventListener("click",function(){(new SetAttributes).ajaxCall()});var SetAttributes=function(){function e(){_classCallCheck(this,e),this.locations,this.$locations,this.festivalStart,this.$festivalStart,this.festivalEnd,this.$festivalEnd,this.enumerateDays,this.allLockers,this.$allLockers,this.lockers,this.setValues()}return _createClass(e,[{key:"setValues",value:function(){this.enumerateDays=!0===document.querySelector('[name="_enumerate_days"]').checked,this.$locations=document.querySelector('[name="_festival_locations"]'),this.locations=this.$locations.value.trim().split(","),this.$festivalStart=document.querySelector('[name="_festival_start"]'),this.festivalStart=this.$festivalStart.value,this.$festivalEnd=document.querySelector('[name="_festival_end"]'),this.festivalEnd=this.$festivalEnd.value,this.$allLockers=document.querySelectorAll('[name^="_lockers"]'),this.allLockers=Array.from(this.$allLockers),this.lockers=this.allLockers.filter(function(e){return e.checked}),this.lockers=this.lockers.map(function(e){return e.dataset.lockertype})}},{key:"ajaxCall",value:function(){console.log("POSTID",localizedVars.postID),jQuery.ajax({url:ajaxurl,data:{action:"fe_set_product_atts",data:{ID:localizedVars.postID,Locations:this.locations,EnumerateDays:this.enumerateDays,FestivalStart:this.festivalStart,FestivalEnd:this.festivalEnd,Lockers:this.lockers}},success:function(e){console.log(e),location.reload(!0)},error:function(e){console.log(e)}})}}]),e}();